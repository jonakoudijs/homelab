version: v1alpha1
debug: false
persist: true

machine:
  type: controlplane
  token: zi6ct1.ljc1ii6nzsctxk6c
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQakNCOGFBREFnRUNBaEI1RVRDUVM4bys3U0ZSRlFwRWhRaWZNQVVHQXl0bGNEQVFNUTR3REFZRFZRUUsKRXdWMFlXeHZjekFlRncweU5ERXdNekV5TURNeE16WmFGdzB6TkRFd01qa3lNRE14TXpaYU1CQXhEakFNQmdOVgpCQW9UQlhSaGJHOXpNQ293QlFZREsyVndBeUVBVlFnc3NhYlNTYWg3Vnl1U0JaTCszZFp4QzlycnVTbWpHa0QwCkpJVGFJZytqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUkKS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVNElwWmJ6YUNzaEM4VXZMQgpidGhkVEpVTjFNY3dCUVlESzJWd0EwRUFJQlhPTFAzdGZrQUYyaTRCcWxzVUgveVY5Nm0yM3BQb20rZlZ5U3UwCmFVR2lmWnZUMEpUd1JTU2lwUnVQRWVsaU9VWVNIWlczbmNSdldHTk1VN0dQRHc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0KTUM0Q0FRQXdCUVlESzJWd0JDSUVJTFVXRDJJcjl2UUs2YklNTjlidTFlS2VSM1k2ZzNGVVBiTU01RnVZRXJ5QwotLS0tLUVORCBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0K
  certSANs: []

  kubelet:
    image: ghcr.io/siderolabs/kubelet:v1.31.1
    defaultRuntimeSeccompProfileEnabled: true
    disableManifestsDirectory: true
    extraMounts:
      - destination: /var/lib/longhorn
        type: bind
        source: /var/lib/longhorn
        options:
          - bind
          - rshared
          - rw

  network:
    hostname: lab-mini-1
    nameservers:
      - 10.0.0.1
    interfaces:
      - interface: enp3s0f0
        addresses:
          - 10.0.0.220/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.0.0.1
        dhcp: false

  time:
    servers:
      - time.cloudflare.com

  install:
    disk: /dev/sda
    image: ghcr.io/siderolabs/installer:v1.8.0
    wipe: true

  registries: {}
 
  features:
    rbac: true
    stableHostname: true
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      forwardKubeDNSToHost: true

  nodeLabels:
    node.kubernetes.io/exclude-from-external-load-balancers: ""

cluster:
  id: HIkPkYLXBExeP68yL3UDP_rmPyKQPqbxYsu7Q_cMyMI=
  secret: 2yuhEprE3M9ukdTYmACKtkuXqg/uqpJSUSnR0Mt/uVU=
  controlPlane:
    endpoint: https://10.0.0.220:6443
  clusterName: homelab
  network:
    dnsDomain: cluster.local
    podSubnets:
      - 10.244.0.0/16
    serviceSubnets:
      - 10.96.0.0/12

  token: ijs8pu.dzjgaud2yv3h24lb
  secretboxEncryptionSecret: 6r+LeICERIA4WqwyVoe9sjM87SNAjtTHWxC7fmn7gmo=
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpakNDQVRDZ0F3SUJBZ0lSQUxmYXFKOUZFaTFGZkZDWFR4aldsTUl3Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOREV3TXpFeU1ETXhNelphRncwek5ERXdNamt5TURNeApNelphTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVFNMzRDTmJZUG14ZXh0M1pHalM1TU9KNFl3RVMxcFhWN1hxdVpDampneU5jWkd3d1lxWkNScTd1RXIKU3UveTJrajNIL3NFck5YTmNjdWxrQkJXb0dvdm8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGT2Vnb09rTUVMamJvK2ZGSGlNQURSdG5MRVFhTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDSUVSZUlyVG4KVktmVlMvUjZWQVYrTTRxdUxRMGdBazhTU3NZSWZ4aDUwVVBvQWlFQWc4VkZna2tKd0RkTW1sN3BoK1JnbXpOZQpCSXlvNWdmM0NNMkl0ZnFWd3lBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUppQ0M0SGQxeUpPMVY4cHhDNTBJR0lKKzRicVRwaTlSN3VvTDNNQ1ZOSkRvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFRE4rQWpXMkQ1c1hzYmQyUm8wdVREaWVHTUJFdGFWMWUxNnJtUW80NE1qWEdSc01HS21RawphdTdoSzBydjh0cEk5eC83Qkt6VnpYSExwWkFRVnFCcUx3PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  aggregatorCA:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJZRENDQVFhZ0F3SUJBZ0lSQUtkSEZVNFFFSHBTaHJsVmF5T2k3N2d3Q2dZSUtvWkl6ajBFQXdJd0FEQWUKRncweU5ERXdNekV5TURNeE16WmFGdzB6TkRFd01qa3lNRE14TXpaYU1BQXdXVEFUQmdjcWhrak9QUUlCQmdncQpoa2pPUFFNQkJ3TkNBQVRrcjl2UWVEUmJFSm5rMjRDUFFzclpNRnIwVmdEQkU0UFFSRXFrWTlXdmo5ZlpUQTQ5CmJOeHUzR2NOVDdteVlZTnRsakI2WnQyanN4TVUySCtDZkhWRG8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4dwpIUVlEVlIwT0JCWUVGRyszNHdjR1QxMFRLU09BSHVQekZYRWhWNjFaTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDCklFTGhsNDlTZ0lxb1JXNUVYVms0QVFwMFYvUjNCY2lZVWFyc0JLWUZhTjNRQWlFQSs4OUFDMTM4VC9mNHZpbWQKV1ZNQ0V6cy91cHJDMm5nZVM2QklEMmdEWjQ0PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUY3UUlMYkVrU0s3NWk0anBmNjhpbExia2ROdlR1dlVJWWNicEFadmtZV0lvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFNUsvYjBIZzBXeENaNU51QWowTEsyVEJhOUZZQXdST0QwRVJLcEdQVnI0L1gyVXdPUFd6YwpidHhuRFUrNXNtR0RiWll3ZW1iZG83TVRGTmgvZ254MVF3PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  serviceAccount:
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBeWhaeFBPdHdmaGhYcjdpY2JqcWxnazBoK3VjMHdjT1NQY3lzV0NTWVFhWjRocGNpCkFUVHRLVGlrY0VaMkZyRlJjQ1NZejh5c2JGaGh6TVhmZnRQZkNIc0VEaGxlMDRxcjZWZ284STc1VUJQUERGdmgKU0NnemZ5VVJMbkJTSTY3UWh6T1ZKMFJRZ0EwNFZ6cExwZHBaVkZlelh0SjZENzF2bk9odlJyMkV1dGtxWkwydwpIUXRtSXMvc2c4akJBUFBkTTMrbHIraUJzQkczZElXejR6SjFoWk1yS25tVXcrUHBINjZHWVZoSnQwWllaNUxtCm1mYXJIVFpUUjR4eFhLcXpCVm1aVGVOR2p3N3RmamxhQWFtRnlBaTlNQ2gzZ3FDNGNUVGNMVWtneHQ5bzdVcjcKeHhSdEZhelhLK1l5bmVmZWJtN0p2OTI2ZU52RTh4U1IrNUNxVGFvQ3R3c0UydHpqTDh0VkxGbXRjVFlNcUllQQp1NGsvTlFGUGVVcm1ONEd5a0xteWMwUysrRHhjRnVMZEJ1Z1RSeXk5cDkyZzZiMjN4Um1yL0xPdlc3dnVMTHgxCm5vczZkNWFXN3BSYW11bUExU0lnU2FVeXRxVXkrWjNlVVoydVpuQXpsdjhBaFVIand0SnViaHlLRjR6U0R5aloKVzVUZVF5b3dXdEVCTENHckFIajFtMURzaHEvaGRiYlp3TTZBYk1QUFYxUHJWTGRjMUhsUnlMOFlORFZTajhmOQpKNjBJM2U3QXR3cUtXL2prLzBjRU5WMUpVNGF0RGVuTWdPcWk5RW1iOSsxVzlCaFN0UVpDUGRWdXJlZ3JpYTRDCi9wNHdUazJzQkkrNHNxb0dvKys1RDU5Rk83ZEhKdWlGeDAwNElHUjFVSFp2U2hxcDFxNG43ZTdCRHE4Q0F3RUEKQVFLQ0FnQnR5TUZkdWYzVDByK1lLNjkzeG81eGVodXlwWFlvcVdsQi8zWEZNS1F5VGhCOTlZNjRueHNUNEx5YwpiZnJyR3d0RjQrdk1QOEdQM25mSytkZ1BtMlEzeERTUXdFR2VwRi8rRlRHd2RjdUZNQzJ6NWhvOXkvRWw2bW9xCkUwVGNNN1QvTGd1aVdGOXZJVDl4UzY4YSs4SzVxaWM4cFJWQWhjWWp0TFgyOVRBdEhac0ZQWE4yWStIcG1aRkEKaW9nblQxUGxEVHhpa3VvWlQ1YWRTNkZORlBWNVNsa1I2eGpoVG1nd0dPelI1MWVzcEIrVXJONXYxK3hmbzBxYwp2UFE4eGxNWTNmTUZ1Q2wxd0VOTzVqTTZZZkRXbWNERmI4WjFCWUVOcHd6UjRUOVlLcmhpNlBCYzE0RG5YSTFNClFQTlFpMDF3S3VtWlBRaDNiZFRSeFdRRkNUTXFwTHZnaUxsY0N6bFZDNHdPU2FtN0JpbUVVZEM2WmpyUlQ2U3cKVE8yWVdWRTltMUtiaGY5OWF1ZkEveHY0Z1lScUV6YUVKbmx2RGRGWXo0cjduVHNkdW9rc0hjaTkzU3pxSDk4WAprcjEvbkNSdUJCQkJqdC9jS2ZtcFpVSEl4bHJ1dmdOZit2UjZMTUtEOUJCSHFFQmFCK0dPeHB3SE1ZaTFlK3pFCmdJVlB2a3lsRm5QOGdQOFYvbHlRdlNtSEQ1MG5WaEUrUmFSdjJVWWJvTUphRUI1bzJzQzNXcUp2L1V4ZnRRdEcKcTM3WVBLYjM1ZGlTd0hGclVHMldaZklGL0Izd2lGRFBRZEgxVGhHT2JESEgydWpBTjVGNCt5STBVejk4MnhBZwpnSkM3MEEvcSttS2FleEl1UkhIV0JSTWl2bUZKZ1NlMU85VWs3U2Q2K2V6RWRVWkVHUUtDQVFFQTU4SjZXbDhHCnNGUmFxNjhUUVdxQjhZREtxYndjcVdtZWFrTnhyREF5OFdKV1JVd1M1L1JqR2VPMWZiOE8zZWRoQ1VaY0E2MFEKRTFwaVo5b01pNDl2TVVrVkp2R2dkR0xZZmxTVDZWOFN0TFp2U0lFYkFyOC9wdmxjNExaOHE2NUJyUkp5aVc5Lwp2NVdQZnhPMUxWRlVVQ2RJSXpTV0FPTXdVU2k0cSsrUy9Zb0xXTzN2OXFDYVppRkIvclpuOVk4Y1gza1BnVkdiCi9LWlozV1QxM05OS1J2cmErZHJaaC9qN3hJd0M1TkcxSzNJdnVtTnNZQXpVa0UrbXphK2syWE9vc2Jra2N3T3EKQW5GNXZiWFJxdWI5eTJ2M3ZqTm1teTJpYkE5T0Y0WmJqelZiQkc3MEZOak1tL3BUaDhYcUNYc3pJcmEzMHFXMApKOXc5RTJCZ3pYMGpJd0tDQVFFQTN6bDU1Y3IyTTdsY29LL21WU0RML2c0UFU2SUJJNFFjSUgzWTJ6Z1JsZys4CjlyUHd2NmJ4cE1DQVBGR21MR2ZUcGNKVFdBWmdTaVdueGd4VWpESU5JWWxJT2pvcjBpQUtnNFlydnBqeTl2bHoKWXRXWVBUYmRJa3NhbGdDbXJJN0hhckdlaVJ0U0lxemc3VFN2NmZON0pzaFBscFVCTUkxeTFjclYzdGs4NThpNApwVnFha2doSWJnN3Qxbk51by9vQUdpOTIzUFR0cVBYRExQU3BuemNid0k2ajVBOGQ1RkVvYlM5RE94b1RpRUxMCjVBZi93LzRGTDg5SklSSXlYMSt1bW5VdXd6KzNXY1hLR2R3WlcwRksvNTlKMDdkM2VNL3J1SS93UktsTHJHa3AKQ04reW51UFFXalZOY3poeTN5VGRhNXpiSjROUXphbG81cTBTem5TVkJRS0NBUUVBb1psZ2VSMGphOVlWdHZxSApvYWhqWFFMaHpVS0dkYlpZcUYzSXFEaWZmT0tGcHlJcFdLVjJhSG4zZGV1L3NRa0NCMWFSR0ZzWEIzZVJnRHB4Clh1cXZySno1NjhLMWtCSFFSUjR5V0pwYlQ3aVpsZU8zOHMxcDA4S3llVm1sU294aDdRMGM0aW5sMksrdmMvdEkKN0lWMkZjR2VNallibGhqVCt2TTYrV0EralIweFZsdnFZM3lPekVIS1k1SEtvVldkZ2hER3QvUXdvUlZaT2QrSQo4K1k4TjR2NUhoajBielEwVVZNVFBYdmdLS0FoR1lUejczRmkwaEZJRE1tNVY0cW5DTzFBdGhYSytKTXBRUmZEClQ3aHJKT2x1d0tmVWxzVldLS1R2WGNYb2w4MnJYa2NEV0hubkNhZWRrT0YybEEvY2t3cjIyQ0dFb2ZxV2Q2bFAKTmxsWUl3S0NBUUJIek4wQXBQLzhNeXN3SkdRYURhcVAxVVhveUx0RkNVRmkwaGZtcTJvOHNtTTlsek5nOGZuWAozSE5pODRCWDJDMmpxNVhUUW5uR1g4WlBWYmY4UUQwcEJGZFBJMWJsQjVsYUpOWDlRSVVtRzZhWnE4cUVKaG1LCjVrMXU0bGE2T2xLNlp0ZHZrbklnNVNxVUlkWlRraFdTcSt1dHE4L3VKaEZCNHpSWHNkaDlWWHJPOVEyeTJ5Y3cKLzJ4UkJtQVlMbG5LRW1wUk9CY1p1Yk5GeW95a3diMFRlczRNbFRBd09FcWdsQXN6LzNjNDVRTmdIWktQSUMzYQo2dm5Dd1craWJjeGpzajJRWC9aQjBmVG56SHY3ZGswQlcrTUxUb0FIUkJtMkM5Wmt2Mit2elVOOXJ6WnRGU24zCldoM0hhZWpKRGJxSzJyRkRUR0c1UlR5UXRpck9iWUZoQW9JQkFDMUJVbFlJak1WdndTV01Eemp1aFpkYlZkUk4KcmxUUDBkN1I4WG9QM3d5bmZzUWY1R1VTMWg3UVd5TExBNFpIRGJYVjhtaFl4WHY1SFo4OGUyc1Z1OFdjVXkrawpnbThmUkdOYXlqNFpPQ3dXU3o1ZHkxZjQ4MXpoSFNmSmF1N252TkdJc3g1dVFNcFg0MTVVamlEUmtOdWZhRHBYCkJNRUhlS3M1QUxvYjFqSFoxd0JXakMyTFFPcnNyUDBBSHpjbEhsenNxNjY2TG8yMVQ2YXdFd3hOaXlQTTRtaWIKNFYxSEhDR2RBTnhXUWxCRlp6c3hEVUpVck1BcnAzMW5Fazh3a3pFRlNMcXkwQUlPL0hHcDZoc1J5Rjdnb0JnKwpsbzJFK2tOTjBrYTgxeVJXb2wzSzVtY2R6dWp6NUNTUlhpSVdOVFVxYy9NcjBvL2V3N0lIZnBicTV3Zz0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K


  apiServer:
    image: registry.k8s.io/kube-apiserver:v1.31.1
    certSANs:
      - 10.0.0.220
    disablePodSecurityPolicy: true
    admissionControl:
      - name: PodSecurity
        configuration:
          apiVersion: pod-security.admission.config.k8s.io/v1alpha1
          defaults:
            audit: restricted
            audit-version: latest
            enforce: baseline
            enforce-version: latest
            warn: restricted
            warn-version: latest
          exemptions:
            namespaces:
              - kube-system
            runtimeClasses: []
            usernames: []
          kind: PodSecurityConfiguration

    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata

  controllerManager:
    image: registry.k8s.io/kube-controller-manager:v1.31.1
  proxy:
    image: registry.k8s.io/kube-proxy:v1.31.1
  scheduler:
    image: registry.k8s.io/kube-scheduler:v1.31.1

  discovery:
    enabled: true
    registries:
      kubernetes:
          disabled: true
      service: {}

  etcd:
    ca:
      crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmVENDQVNPZ0F3SUJBZ0lRTlY5aTZpWmoycnBZeTJSUU8xMkZXVEFLQmdncWhrak9QUVFEQWpBUE1RMHcKQ3dZRFZRUUtFd1JsZEdOa01CNFhEVEkwTVRBek1USXdNekV6TmxvWERUTTBNVEF5T1RJd016RXpObG93RHpFTgpNQXNHQTFVRUNoTUVaWFJqWkRCWk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQkh3VlNtTnAwM1Y3ClgyNGJMRUcwVkxDSER4MW1CYWF3a2hhMk82YTFnZ1ZZbXRNKzJOR0UxYWF6K3BqWG5wU0p2SlVSaW0vNXZyM00KbE1ZY1B2ZWdGL2lqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjRApBUVlJS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVWEIrcEQvYyt0aDRTCkxQY29UdUZKcWFCQmQ2VXdDZ1lJS29aSXpqMEVBd0lEU0FBd1JRSWhBT2UzS3hQTmFtQUJJODdoUHppRnZCUngKVVhTOFQxc2pwdmRKckZTY2cvazdBaUFrenBTTTBpRC9iK0xwVFZnV2h0NTVmbFRINERXZWFweDAvL3F6Z1B1RgpYZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSU91OTZtR3c2MndyeDhYZkJ5K1Z0T0RCVjlINXJkRDhBT2xUazI5cndrbDdvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFZkJWS1kyblRkWHRmYmhzc1FiUlVzSWNQSFdZRnByQ1NGclk3cHJXQ0JWaWEwejdZMFlUVgpwclA2bU5lZWxJbThsUkdLYi9tK3ZjeVV4aHcrOTZBWCtBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  extraManifests: []
  inlineManifests: []
  allowSchedulingOnControlPlanes: false
